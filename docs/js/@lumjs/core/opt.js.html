<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: opt.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: opt.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Functions for working with options and default values.
 * @module @lumjs/core/opt
 */

const {U,F,S,needObj,needType} = require('./types');

/**
 * See if a value is *set*, and if not, return a default value.
 *
 * @param {*} opt - The value we are testing.
 * @param {*} defvalue - The default value if opt was null or undefined.
 *
 * @param {boolean} [allowNull=false] If true, allow null to count as *set*.
 * @param {boolean} [isLazy=false]    If true, and `defvalue` is a function,
 *                                    use the value from the function as 
 *                                    the default.
 * @param {object} [lazyThis=null]    If `isLazy` is true, this object will
 *                                    be used as `this` for the function.
 *
 * @return {*} Either the specified `opt` value or the default value.
 * @alias module:@lumjs/core/opt.val
 */
function val(opt, defvalue, allowNull=false, isLazy=false, lazyThis=null)
{
  if (typeof opt === U || (!allowNull &amp;&amp; opt === null))
  { // The defined value was not "set" as per our rules.
    if (isLazy &amp;&amp; typeof defvalue === F)
    { // Get the default value from a passed in function.
      return defvalue.call(lazyThis);
    }
    return defvalue;
  }

  return opt;
}

exports.val = val;

/**
 * See if a property in an object is set.
 *
 * If it is, return the property, otherwise return a default value.
 * This uses the `val()` method, and as such supports the same options.
 * However read the parameters carefully, as the defaults may be different!
 *
 * @param {object} obj     - An object to test for a property in.
 * @param {string} optname - The property name we're checking for.
 * @param {*} defvalue     - The default value.
 *
 * @param {bool}   [allowNull=true] Same as `val()`, but the default is `true`.
 * @param {bool}   [isLazy=false]   Same as `val()`.
 * @param {object} [lazyThis=opts]  Same as `val()`.
 *
 * @return {*} Either the property value, or the default value.
 * module:@lumjs/core/opt.get
 */
function get(obj, optname, defvalue, allowNull=true, isLazy=false, lazyThis=obj)
{
  needObj(obj);
  needType(S, optname);
  return val(obj[optname], defvalue, allowNull, isLazy, lazyThis);
}

exports.get = get;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-@lumjs_core.html">@lumjs/core</a></li><li><a href="module-@lumjs_core_arrays.html">@lumjs/core/arrays</a></li><li><a href="module-@lumjs_core_context.html">@lumjs/core/context</a></li><li><a href="module-@lumjs_core_enum.html">@lumjs/core/enum</a></li><li><a href="module-@lumjs_core_flags.html">@lumjs/core/flags</a></li><li><a href="module-@lumjs_core_meta.html">@lumjs/core/meta</a></li><li><a href="module-@lumjs_core_modules.html">@lumjs/core/modules</a></li><li><a href="module-@lumjs_core_obj.html">@lumjs/core/obj</a></li><li><a href="module-@lumjs_core_observable.html">@lumjs/core/observable</a></li><li><a href="module-@lumjs_core_opt.html">@lumjs/core/opt</a></li><li><a href="module-@lumjs_core_strings.html">@lumjs/core/strings</a></li><li><a href="module-@lumjs_core_types.html">@lumjs/core/types</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-@lumjs_core_meta.Functions.html">Functions</a></li><li><a href="module-@lumjs_core_types.TYPES.html">TYPES</a></li></ul><h3>Classes</h3><ul><li><a href="module-@lumjs_core.InternalObjectId.html">InternalObjectId</a></li><li><a href="module-@lumjs_core_meta.AbstractClass.html">AbstractClass</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Mon Sep 12 2022 08:24:28 GMT-0700 (Pacific Daylight Saving Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
